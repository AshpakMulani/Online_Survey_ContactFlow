{"modules":[{"id":"b8fb918a-87a3-4dcc-b42d-82f7c973e028","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":292,"y":1396}}},{"id":"c7c675f7-951d-4629-bc21-a2e651a7d68c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b8fb918a-87a3-4dcc-b42d-82f7c973e028"}],"parameters":[{"name":"Text","value":"Some Error occurred while initiating survey. Please call in sometime.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":55.666656494140625,"y":1053},"useDynamic":false}},{"id":"6f20d9b1-e20f-4ca8-8ab0-c28d6b696d5e","type":"SetVoice","branches":[{"condition":"Success","transition":"2611c8db-086c-4128-be31-c3666d5d4c9b"}],"parameters":[{"name":"GlobalVoice","value":"Brian"}],"metadata":{"position":{"x":192,"y":618}}},{"id":"21ecc2e6-aac2-4f4b-921f-c3ac7c494b86","type":"SetAttributes","branches":[{"condition":"Success","transition":"e1c53e48-2120-4998-9cdd-bf21bcbe3d60"},{"condition":"Error","transition":"b8fb918a-87a3-4dcc-b42d-82f7c973e028"}],"parameters":[{"name":"Attribute","value":"Customer Number","key":"contactnumber","namespace":"System"}],"metadata":{"position":{"x":804,"y":1048}}},{"id":"57609050-c28d-4087-ba64-98bada142fdc","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b8fb918a-87a3-4dcc-b42d-82f7c973e028"}],"parameters":[{"name":"Text","value":"Error in first lambda","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":328,"y":1142},"useDynamic":false}},{"id":"9ca0e93c-5754-4347-a62e-9e80d4842744","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"21ecc2e6-aac2-4f4b-921f-c3ac7c494b86"},{"condition":"Error","transition":"57609050-c28d-4087-ba64-98bada142fdc"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:694688523717:function:getSurveyData"},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"contactnumber","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":499,"y":922},"dynamicMetadata":{"contactnumber":true}},"target":"Lambda"},{"id":"2611c8db-086c-4128-be31-c3666d5d4c9b","type":"SetAttributes","branches":[{"condition":"Success","transition":"d9fb786e-65bc-49f0-9b3c-e2885295bd02"},{"condition":"Error","transition":"c7c675f7-951d-4629-bc21-a2e651a7d68c"}],"parameters":[{"name":"Attribute","value":"Customer Number","key":"contactnumber","namespace":"System"}],"metadata":{"position":{"x":42,"y":806}}},{"id":"d9fb786e-65bc-49f0-9b3c-e2885295bd02","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9ca0e93c-5754-4347-a62e-9e80d4842744"}],"parameters":[{"name":"Text","value":"..","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":272,"y":820},"useDynamic":false}},{"id":"6287f9f8-98de-4fb3-9ee9-aa2d39983977","type":"Transfer","branches":[{"condition":"Error","transition":"1e032b1a-f6c3-4626-acc7-20c1b4c6cd0e"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:694688523717:instance/dd366c93-2381-4ecc-a329-0941545c32e4/contact-flow/06fd8991-5703-46ab-9340-46d8ce5ed385","resourceName":"FacilitiesSurvey-Question1"}],"metadata":{"position":{"x":1228,"y":750},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:694688523717:instance/dd366c93-2381-4ecc-a329-0941545c32e4/contact-flow/06fd8991-5703-46ab-9340-46d8ce5ed385","text":"FacilitiesSurvey-Question1"}},"target":"Flow"},{"id":"4d599b3c-69b5-4eec-9c6e-09b18ff51a4b","type":"PlayPrompt","branches":[{"condition":"Success","transition":"6287f9f8-98de-4fb3-9ee9-aa2d39983977"}],"parameters":[{"name":"Text","value":"Greetings! Welcome to GAP facilities survey...\nThis survey consists of 5 questions, seeking your level of satisfaction, over the different facilities services...\nPlease answer SATISFIED, AVERAGE, or POOR, appropriately against each service feedback question.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":942,"y":745},"useDynamic":false}},{"id":"e1c53e48-2120-4998-9cdd-bf21bcbe3d60","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Contains","conditionValue":"1","transition":"9e5dd99d-ea97-4865-94b9-156491aa86a4"},{"condition":"Evaluate","conditionType":"Contains","conditionValue":"0","transition":"4d599b3c-69b5-4eec-9c6e-09b18ff51a4b"},{"condition":"NoMatch","transition":"4d599b3c-69b5-4eec-9c6e-09b18ff51a4b"}],"parameters":[{"name":"Attribute","value":"$.External.exists"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":637,"y":581},"conditionMetadata":[{"id":"7efba449-cf7b-4ad1-950a-83a33ee45ca2","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"1"},{"id":"ab7ffe0d-0d83-47a2-ba47-74fe6759fa6f","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"0"}]}},{"id":"cd219f4f-1948-4b82-8167-289c76cec462","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9e5dd99d-ea97-4865-94b9-156491aa86a4"}],"parameters":[{"name":"Text","value":"Sorry we could not record the response.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1391.6666259765625,"y":559},"useDynamic":false}},{"id":"1e032b1a-f6c3-4626-acc7-20c1b4c6cd0e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"516acbac-ab81-4587-a334-48dfbd7e9c18"}],"parameters":[{"name":"Text","value":"There was error during transferring flow to first question","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1511,"y":734},"useDynamic":false}},{"id":"3fa66bd5-fcd4-49bc-b49e-03ebce44a72f","type":"Transfer","branches":[{"condition":"Error","transition":"516acbac-ab81-4587-a334-48dfbd7e9c18"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:694688523717:instance/dd366c93-2381-4ecc-a329-0941545c32e4/contact-flow/b8c77937-a1bf-4472-80b7-1426cf0a3a3b","resourceName":"FacilitiesSurvey-ChangeResponse"}],"metadata":{"position":{"x":1640,"y":219},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:694688523717:instance/dd366c93-2381-4ecc-a329-0941545c32e4/contact-flow/b8c77937-a1bf-4472-80b7-1426cf0a3a3b","text":"FacilitiesSurvey-ChangeResponse"}},"target":"Flow"},{"id":"e64db525-1ebd-49a8-a552-62df9b437177","type":"PlayPrompt","branches":[{"condition":"Success","transition":"3fa66bd5-fcd4-49bc-b49e-03ebce44a72f"}],"parameters":[{"name":"Text","value":"Some error occurred while retrieving your previous feedback.\nRedirecting you to change feedback option.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1787.3333740234375,"y":640},"useDynamic":false}},{"id":"9e5dd99d-ea97-4865-94b9-156491aa86a4","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"change","transition":"3fa66bd5-fcd4-49bc-b49e-03ebce44a72f"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"repeat","transition":"f1f0ce58-6d0b-4859-a18e-3194d9778e2c"},{"condition":"NoMatch","transition":"cd219f4f-1948-4b82-8167-289c76cec462"},{"condition":"Error","transition":"cd219f4f-1948-4b82-8167-289c76cec462"}],"parameters":[{"name":"Text","value":"Well Come back to the GAP facilities survey...\nAs per our records, you have already completed this survey...\nShould you wish to change your feedback, please say Change, or... say Repeat... to hear your, saved, responses.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"FacilitiesSurveyOptions"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1159,"y":343},"conditionMetadata":[{"id":"b1dae93d-34e1-407f-8c9b-1560887b80fe","value":"change"},{"id":"d87b0c98-8cbf-41e4-b947-fccaeba40d58","value":"repeat"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"516acbac-ab81-4587-a334-48dfbd7e9c18","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2397,"y":656}}},{"id":"f1f0ce58-6d0b-4859-a18e-3194d9778e2c","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"3f1dc21f-7f35-4233-99c3-cc50b7696188"},{"condition":"Error","transition":"e64db525-1ebd-49a8-a552-62df9b437177"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:694688523717:function:GetOldSurveyResponse"},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"contactnumber","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":1715,"y":403},"dynamicMetadata":{"contactnumber":true}},"target":"Lambda"},{"id":"3f1dc21f-7f35-4233-99c3-cc50b7696188","type":"PlayPrompt","branches":[{"condition":"Success","transition":"516acbac-ab81-4587-a334-48dfbd7e9c18"}],"parameters":[{"name":"Text","value":"Your recorded feedback is as follows...\n\nFor Canteen services, you replied... $.External.CanteenFeedback..\nFor Cleaning services, you replied... $.External.CleaningFeedback..\nFor Gardening services, you replied... $.External.GardeningFeedback..\nFor Security services, you replied... $.External.SecurityFeedback..\nFor Transport services, you replied... $.External.TransportFeedback..\n\nThank you for contacting GAP facilities survey..have a wonderful day!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2080,"y":472},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"6f20d9b1-e20f-4ca8-8ab0-c28d6b696d5e","metadata":{"entryPointPosition":{"x":56,"y":616},"snapToGrid":false,"name":"FacilitiesSurvey-Welcome","description":null,"type":"contactFlow","status":"published","hash":"5a4f5f4e64e7232e781ede8a55589ea1be899a61e8bbd62a35d5511e854519a5"}}